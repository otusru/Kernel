## üêß Linux: –ú–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ —è–¥—Ä–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Linux

Linux ‚Äî —ç—Ç–æ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ —è–¥—Ä–æ, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ (kernel mode). –û–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:

* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏**: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å, —Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ.
* **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º.
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏**: –¥—Ä–∞–π–≤–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π.

### –ü—Ä–∏–º–µ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–∞–π–ª `main.c` –∏–∑ —è–¥—Ä–∞ Linux, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É:

```c
// main.c

#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h>

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Author");
MODULE_DESCRIPTION("A simple Linux driver");

static int __init hello_init(void) {
    printk(KERN_INFO "Hello, World!\n");
    return 0;
}

static void __exit hello_exit(void) {
    printk(KERN_INFO "Goodbye, World!\n");
}

module_init(hello_init);
module_exit(hello_exit);
```

–≠—Ç–æ—Ç –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —è–¥—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –≤—ã–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è.

### –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã**:

   ```bash
   sudo apt-get install build-essential linux-headers-$(uname -r)
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ Makefile**:

   ```makefile
   obj-m += hello.o

   all:
       make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

   clean:
       make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean
   ```

3. **–°–æ–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å**:

   ```bash
   make
   ```

4. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥—É–ª—å –≤ —è–¥—Ä–æ**:

   ```bash
   sudo insmod hello.ko
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ –≤ –∂—É—Ä–Ω–∞–ª–µ —è–¥—Ä–∞**:

   ```bash
   dmesg | tail
   ```

6. **–í—ã–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥—É–ª—å**:

   ```bash
   sudo rmmod hello
   ```

---

## ü¶ù Minix 3: –ú–∏–∫—Ä–æ—è–¥—Ä–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Minix 3

Minix 3 ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—è–¥—Ä–æ, –≥–¥–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

* **–ú–∏–∫—Ä–æ—è–¥—Ä–æ**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –ø–∞–º—è—Ç—å—é –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (IPC).
* **–°–µ—Ä–≤–∏—Å—ã**: –¥—Ä–∞–π–≤–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, —Å–µ—Ç—å ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.

### –ü—Ä–∏–º–µ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–∞–π–ª `main.c` –∏–∑ —è–¥—Ä–∞ Minix 3:

```c
// main.c

#include "kernel.h"

int main(void) {
    printf("Hello from Minix 3 kernel!\n");
    return 0;
}
```

–≠—Ç–æ—Ç –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ —è–¥—Ä–æ Minix 3, –≥–¥–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

### –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Minix 3:

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:

   ```bash
   git clone https://github.com/o-oconnell/minixfromscratch.git
   cd minixfromscratch
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É**:

   ```bash
   make
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ QEMU**:

   ```bash
   qemu-system-i386 -kernel minix-3.1.0/kernel
   ```

---

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Linux –∏ Minix 3

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞           | Linux (–º–æ–Ω–æ–ª–∏—Ç)              | Minix 3 (–º–∏–∫—Ä–æ—è–¥—Ä–æ)                    |
| ------------------------ | ---------------------------- | -------------------------------------- |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          | –í—Å–µ –≤ —è–¥—Ä–µ                   | –ú–∏–Ω–∏–º—É–º –≤ —è–¥—Ä–µ, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤ user space |
| **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**           | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞ | –í—ã—Å–æ–∫–∞—è –∏–∑-–∑–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤     |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**   | –í—ã—Å–æ–∫–∞—è                      | –ù–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ –∏–∑-–∑–∞ IPC                 |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** | –í—ã—Å–æ–∫–∞—è                      | –°—Ä–µ–¥–Ω—è—è                                |

---

## üìö –†–µ—Å—É—Ä—Å—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è

* **Linux Kernel**: [https://github.com/torvalds/linux](https://github.com/torvalds/linux)
* **Minix 3**: [https://github.com/o-oconnell/minixfromscratch](https://github.com/o-oconnell/minixfromscratch)
* **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —è–¥—Ä–∞ Linux**: [https://www.kernel.org/doc/html/latest/](https://www.kernel.org/doc/html/latest/)
* **–ö–Ω–∏–≥–∞ "Linux Kernel Development"**: [https://www.amazon.com/Linux-Kernel-Development-Robert-Love/dp/0672329468](https://www.amazon.com/Linux-Kernel-Development-Robert-Love/dp/0672329468)
