# 🧠 МОДУЛЬ 2: Типы ядер операционных систем — схемы, код и примеры

---

## 📚 Что ты узнаешь:

* Основные типы ядер: монолитное, микроядро, гибридное, экзоядро и другие
* Преимущества и недостатки каждого типа
* Примеры реальных ОС с открытым исходным кодом
* Визуальные архитектурные схемы
* Где найти и изучать код каждого типа

---

## 🧱 1. Монолитное ядро (Monolithic Kernel)

### 💡 Суть:

Вся логика ОС (память, процессы, файловая система, драйверы и т.д.) находится **внутри одного исполняемого ядра** и работает в привилегированном режиме.

### 📌 Примеры ОС:

* **Linux**
* **MS-DOS**
* **FreeBSD**
* **Old UNIX**

### ✅ Преимущества:

* Высокая производительность
* Простое взаимодействие компонентов (нет межпроцессного взаимодействия)

### ❌ Недостатки:

* Один баг может крашнуть всю систему
* Трудность обновления и отладки модулей

### 📊 Схема архитектуры:

```
┌─────────────────────────────┐
│        Пользователь         │
└────────────┬────────────────┘
             ↓
┌────────────▼────────────────┐
│           Ядро              │
│ ┌─────┬────┬─────┬────────┐ │
│ │ FS  │ MM │ IPC │ Драйверы│ │
│ └─────┴────┴─────┴────────┘ │
└─────────────────────────────┘
```

### 🔗 Пример исходного кода:

* **Linux Kernel**: [https://github.com/torvalds/linux](https://github.com/torvalds/linux)

---

## 🧩 2. Микроядро (Microkernel)

### 💡 Суть:

Ядро выполняет **только базовые функции** (планировщик, память, IPC). Всё остальное работает как обычные службы в **режиме пользователя** (например, драйверы, файловая система).

### 📌 Примеры ОС:

* **Minix 3**: [https://github.com/Stichting-MINIX-Research-Foundation/minix](https://github.com/Stichting-MINIX-Research-Foundation/minix)
* **QNX**
* **GNU Hurd** (частично микроядро)

### ✅ Преимущества:

* Безопасность и стабильность (компоненты можно перезапускать)
* Легче отлаживать и масштабировать

### ❌ Недостатки:

* Потери на IPC между компонентами
* Сложнее реализация

### 📊 Схема архитектуры:

```
┌──────────────────────────────┐
│        Пользователь          │
└────────────┬─────────────────┘
             ↓
┌────────────▼─────────────────┐
│        Пользовательские      │
│       службы ОС (FS, net)    │
└────────────┬─────────────────┘
             ↓ IPC
┌────────────▼─────────────────┐
│           Микроядро          │
│   (планирование, память, IPC)│
└────────────┬─────────────────┘
             ↓
┌────────────▼─────────────────┐
│           Аппаратура         │
└──────────────────────────────┘
```

---

## 🔀 3. Гибридное ядро (Hybrid Kernel)

### 💡 Суть:

Комбинация монолитного и микроядерного подхода. Некоторые компоненты выполняются в режиме ядра, а другие — как службы.

### 📌 Примеры ОС:

* **Windows NT** (все современные Windows)
* **macOS / iOS (XNU ядро)**: [https://github.com/apple/darwin-xnu](https://github.com/apple/darwin-xnu)

### ✅ Преимущества:

* Производительность ближе к монолиту
* Гибкость и частичная модульность

### ❌ Недостатки:

* Усложнённая архитектура
* Не до конца использует преимущества микроядер

### 📊 Схема архитектуры:

```
┌──────────────────────────────┐
│        Пользователь          │
└────────────┬─────────────────┘
             ↓
┌────────────▼─────────────────┐
│    Пользовательские службы   │
└────────────┬─────────────────┘
             ↓
┌────────────▼─────────────────┐
│         Гибридное ядро       │
│ ┌─────┬────┬─────┬──────────┐│
│ │ FS  │ MM │ IPC │ Драйверы ││
│ └─────┴────┴─────┴──────────┘│
└────────────┬─────────────────┘
             ↓
┌────────────▼─────────────────┐
│           Аппаратура         │
└──────────────────────────────┘
```

---

## 🧬 4. Экзоядро (Exokernel)

### 💡 Суть:

Минимальное ядро, которое **не управляет ресурсами**, а лишь предоставляет безопасный доступ к ним. Все функции ОС реализуются в библиотеках поверх ядра.

### 📌 Примеры:

* **ExOS / Exokernel (MIT проект)**

### ✅ Преимущества:

* Максимальная производительность
* Гибкость реализации пользовательских ОС

### ❌ Недостатки:

* Сложность разработки библиотек
* Низкая совместимость

📎 Исходный код: [https://pdos.csail.mit.edu/exo/](https://pdos.csail.mit.edu/exo/)

---

## 📦 Дополнительно

| Тип ядра   | Пример ОС      | Код           | Особенности                |
| ---------- | -------------- | ------------- | -------------------------- |
| Монолитное | Linux, BSD     | ✅ Open Source | Высокая производительность |
| Микроядро  | Minix 3, QNX   | ✅ Open Source | IPC и модульность          |
| Гибридное  | Windows, macOS | Частично      | Компромисс                 |
| Экзоядро   | ExOS           | ✅ Open Source | Близость к железу          |
| Наноядро   | L4, seL4       | ✅ Частично    | Минимальный размер ядра    |
